version: 2

macros:
  - name: generate_schema_name
    description: >
      The purpose of this macro is to dynamically generate dataset names in Bigquery for developers. For example, model stage/shopify/stg_shopify__model will appear in BQ in the following path: quip-dw-stage.developername_shopify.stg_shopify__model
  - name: generate_database_name
    description: >
      The purpose of this macro is to dynamically generate database names based on the dbt target. If the target is prod, the database name will be quip-dw-stage. If the target is dev, the database name will be quip-dw-stage-dev.
  - name: generate_hashed_pii_fields
    description: >
      The purpose of this macro is to hash PII fields in a dataset. This is useful for GDPR compliance. 

  - name: get_max_partition
    description: |
      This macro retrieves the maximum value of a specified partition field from the current model table.
      It can also accept an optional `where_clause` to filter the rows before retrieving the maximum value.
    arguments:
      - name: partition_field
        description: |
          The field/column on which the `MAX()` function is applied.
          Typically, this is a timestamp or a partition key.
        type: string
      - name: where_clause
        description: |
          An optional SQL WHERE clause to filter the rows for the `MAX()` calculation.
          If not provided, the entire table is considered.
        type: string
